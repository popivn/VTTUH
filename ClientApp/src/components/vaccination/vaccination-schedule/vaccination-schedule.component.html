<!-- Hero Section -->
<section class="py-5" style="background: linear-gradient(135deg, #10B981 0%, #059669 100%);">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-8 mx-auto text-center text-white">
        <nav aria-label="breadcrumb" class="mb-3">
          <ol class="breadcrumb justify-content-center mb-0">
            <li class="breadcrumb-item"><a routerLink="/" class="text-white-50">Trang chủ</a></li>
            <li class="breadcrumb-item"><a routerLink="/vaccination" class="text-white-50">Tiêm chủng</a></li>
            <li class="breadcrumb-item active text-white" aria-current="page">Lịch tiêm chủng</li>
          </ol>
        </nav>
        <h1 class="display-5 fw-bold mb-3">
          <i class="bi bi-calendar-heart me-3"></i>Lịch tiêm chủng
        </h1>
        <p class="lead mb-0 opacity-90">
          Lịch tiêm chủng theo độ tuổi - Vaccine bắt buộc và khuyến nghị
        </p>
      </div>
    </div>
  </div>
</section>

<div class="container py-5">
  <!-- Legend -->
  <div class="card border-0 shadow-sm rounded-4 mb-4">
    <div class="card-body p-4">
      <div class="row align-items-center">
        <div class="col-md-6">
          <h5 class="fw-bold mb-3 vtth-text-primary">
            <i class="bi bi-info-circle me-2"></i>Chú thích
          </h5>
        </div>
        <div class="col-md-6">
          <div class="d-flex flex-wrap gap-3 justify-content-md-end">
            <span class="d-flex align-items-center gap-2">
              <span class="badge bg-danger rounded-pill">Bắt buộc</span>
              <small class="text-muted">Theo chương trình TCMR</small>
            </span>
            <span class="d-flex align-items-center gap-2">
              <span class="badge bg-info rounded-pill">Khuyến nghị</span>
              <small class="text-muted">Nên tiêm</small>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Age Group Tabs -->
  <div class="card border-0 shadow-lg rounded-4 overflow-hidden">
    <!-- Tab Navigation -->
    <div class="card-header border-0 p-0" style="background: linear-gradient(135deg, #f8f9ff 0%, #f0f4ff 100%);">
      <div class="d-flex flex-wrap">
        <button *ngFor="let group of ageGroups"
                class="btn flex-grow-1 py-3 rounded-0 border-0 fw-semibold"
                [class.text-white]="activeTab() === group.id"
                [class.text-muted]="activeTab() !== group.id"
                [style.background]="activeTab() === group.id ? 'linear-gradient(135deg, ' + group.color + ', ' + group.color + 'dd)' : 'transparent'"
                (click)="setActiveTab(group.id)">
          <i [class]="'bi ' + group.icon + ' me-2'"></i>
          <span class="d-none d-lg-inline">{{ group.label }}</span>
          <span class="d-lg-none">{{ group.label.split('(')[0] }}</span>
        </button>
      </div>
    </div>

    <!-- Tab Content -->
    <div class="card-body p-0">
      <div *ngIf="currentGroup" class="table-responsive">
        <table class="table table-hover mb-0">
          <thead style="background: linear-gradient(135deg, #f8f9ff 0%, #f0f4ff 100%);">
            <tr>
              <th class="border-0 py-3 ps-4" style="width: 30%;">
                <i class="bi bi-capsule me-2" [style.color]="currentGroup.color"></i>Vaccine
              </th>
              <th class="border-0 py-3" style="width: 15%;">Số mũi</th>
              <th class="border-0 py-3" style="width: 25%;">Thời điểm</th>
              <th class="border-0 py-3" style="width: 15%;">Loại</th>
              <th class="border-0 py-3 pe-4" style="width: 15%;">Ghi chú</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of currentGroup.schedule; let i = index"
                class="align-middle"
                [class.bg-light]="i % 2 === 0">
              <td class="py-3 ps-4">
                <div class="d-flex align-items-center gap-2">
                  <div class="rounded-circle d-flex align-items-center justify-content-center flex-shrink-0"
                       [style.background]="'linear-gradient(135deg, ' + currentGroup.color + '22, ' + currentGroup.color + '11)'"
                       style="width: 40px; height: 40px;">
                    <i class="bi bi-shield-check" [style.color]="currentGroup.color"></i>
                  </div>
                  <strong>{{ item.vaccine }}</strong>
                </div>
              </td>
              <td class="py-3">
                <span class="badge bg-secondary bg-opacity-10 text-dark rounded-pill px-3">
                  {{ item.doses }}
                </span>
              </td>
              <td class="py-3">
                <span class="text-muted">{{ item.timing }}</span>
              </td>
              <td class="py-3">
                <span class="badge rounded-pill" [class.bg-danger]="item.required" [class.bg-info]="!item.required">
                  {{ item.required ? 'Bắt buộc' : 'Khuyến nghị' }}
                </span>
              </td>
              <td class="py-3 pe-4">
                <small class="text-muted">{{ item.notes || '-' }}</small>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Tab Footer -->
    <div class="card-footer border-0 p-4" [style.background]="'linear-gradient(135deg, ' + (currentGroup?.color || '#8B5CF6') + '11, ' + (currentGroup?.color || '#8B5CF6') + '05)'">
      <div class="row align-items-center">
        <div class="col-md-8">
          <p class="mb-0 text-muted small">
            <i class="bi bi-info-circle me-2"></i>
            Lịch tiêm có thể thay đổi theo tình trạng sức khỏe. Vui lòng tư vấn bác sĩ trước khi tiêm.
          </p>
        </div>
        <div class="col-md-4 text-md-end mt-3 mt-md-0">
          <a routerLink="/dat-lich-kham" class="btn rounded-pill px-4 text-white"
             [style.background]="'linear-gradient(135deg, ' + (currentGroup?.color || '#8B5CF6') + ', ' + (currentGroup?.color || '#8B5CF6') + 'cc)'">
            <i class="bi bi-calendar-plus me-2"></i>Đặt lịch tiêm
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Additional Info Cards -->
  <div class="row g-4 mt-4">
    <div class="col-md-6">
      <div class="card border-0 shadow-sm h-100 rounded-4">
        <div class="card-body p-4">
          <h5 class="fw-bold mb-3" style="color: #8B5CF6;">
            <i class="bi bi-download me-2"></i>Tải lịch tiêm chủng
          </h5>
          <p class="text-muted small mb-3">
            Tải file PDF lịch tiêm chủng để tiện theo dõi và mang theo khi đến bệnh viện.
          </p>
          <button class="btn btn-outline-primary rounded-pill">
            <i class="bi bi-file-pdf me-2"></i>Tải PDF
          </button>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card border-0 shadow-sm h-100 rounded-4">
        <div class="card-body p-4">
          <h5 class="fw-bold mb-3 vtth-text-primary">
            <i class="bi bi-telephone me-2"></i>Cần tư vấn thêm?
          </h5>
          <p class="text-muted small mb-3">
            Liên hệ hotline hoặc đến trực tiếp bệnh viện để được tư vấn lịch tiêm phù hợp.
          </p>
          <a href="tel:1900xxxx" class="btn vtth-btn-primary rounded-pill">
            <i class="bi bi-headset me-2"></i>1900 xxxx
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

